---
import Layout from '../layouts/Layout.astro'
import Card from '../components/Card.astro'
import Pagination from '../components/Pagination.astro'
import type { GetStaticPathsOptions } from 'astro'

export async function getStaticPaths({ paginate }: GetStaticPathsOptions) {
  const astronautPages = [
    {
      astronaut: 'Neil Armstrong',
    },
    {
      astronaut: 'Buzz Aldrin',
    },
    {
      astronaut: 'Sally Ride',
    },
    {
      astronaut: 'John Glenn',
    },
  ]
  // Generate pages from our array of astronauts, with 2 to a page
  const pages = paginate(astronautPages, { pageSize: 2 })

  return pages.map((page, idx: number) => ({
    ...page,
    params: {
      page: idx === 0 ? undefined : `pages/${idx + 1}`,
    },
  }))
}

const { page } = Astro.props
---

<Layout title="Qu1etboy blog">
  <section class="px-5">
    <h1>Page {page.currentPage}</h1>
    <ul class="flex flex-col gap-3 mt-5">
      <!--List the array of astronaut info-->
      {
        page.data.map(({ astronaut }: { astronaut: any }) => (
          <Card title={astronaut} body="" href="" />
        ))
      }
    </ul>

    <Pagination numOfPages={page.lastPage} currPage={page.currentPage} />
  </section>
</Layout>
